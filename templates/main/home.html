{% extends "base.html" %}

{% block content %}
<h2>Мои задачи</h2>

<form method="post" class="row g-3 mb-4">
    {% csrf_token %}
    <div class="col-md-6">
        <input type="text" name="title" class="form-control" placeholder="Новая задача" required>
    </div>
    <div class="col-md-4">
        <input type="datetime-local" name="due_date" class="form-control">
    </div>
    <div class="col-md-2">
        <button type="submit" class="btn btn-success w-100">Добавить</button>
    </div>
</form>

<hr>

{% if tasks %}
    <div class="list-group">
        {% for task in tasks %}
            <div class="list-group-item d-flex justify-content-between align-items-center {% if task.is_completed %}list-group-item-secondary{% endif %}">
                <div>
                    <strong>{{ task.title }}</strong>
                    {% if task.due_date %}
                        <small class="text-muted">до {{ task.due_date|date:"d.m.Y H:i" }}</small>
                    {% endif %}
                </div>
                {% if not task.is_completed %}
                    <a href="{% url 'task_done' task.id %}" class="btn btn-sm btn-outline-primary">Сделано</a>
                {% else %}
                    <span class="badge bg-success">✔ Выполнено</span>
                {% endif %}
            </div>
        {% endfor %}
    </div>
{% else %}
    <p>Задач пока нет 🙃</p>
{% endif %}
{% endblock %}
